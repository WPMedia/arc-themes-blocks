@use 'sass:map';
@use 'sass:list';

@import 'helpers';

:root {
  // Global Tokens
  @each $name, $value in $global {
    --global-#{$name}: #{$value};
  }

  // Global Alias Tokens
  @each $name, $value in $alias {
    --#{$name}: #{$value};
  }
}

@each $breakpoint, $breakpointValue in $breakpoints {
  @media only screen and ($breakpointValue) {
    :root {
      // Alias Tokens
      @each $name, $value in map.get($tokens, $breakpoint, 'alias') {
        --#{$name}: #{$value};
      }


      // Component Tokens
      @each $componentName, $componentItem in map.get($tokens, $breakpoint, 'components') {
        @if list.length($componentItem) == 0 {
          @warn 'Component "#{$componentName}" is configured with no options';
        } @else {
          @if type-of($componentItem) == map {
            @each $componentProperty, $componentValue in $componentItem {
              @if type-of($componentValue) != map {
                --c-#{$componentName}-#{$componentProperty}: #{$componentValue};
              }
            }
          }
        }
      }

      // Block Tokens
      @each $blockName, $blockItem in map.get($tokens, $breakpoint, 'block') {
        @if list.length($blockItem) == 0 {
          @warn 'Block "#{$blockName}" is configured with no options';
        } @else {
          @if type-of($blockItem) == map {
            @each $bProperty, $bValue in $blockItem {
              @if type-of($bValue) != map {
                --b-#{$blockName}-#{$bProperty}: #{$bValue};
              }
            }
          }
        }
      }
    }
  }
}
